import gtk.*;
import gobject.(gSignalConnect);

private external hello(widget: Pointer[GtkWidget], data: Pointer[Int8]) {
    println("hello");
}

private external destroying(widget: Pointer[GtkWidget], data: Pointer[Int8]) {
    gtk_main_quit();
}

main() {
    gtk_init(null(Int32), null(Pointer[Pointer[CChar]]));

    var window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gSignalConnect(window, cstring("destroy"),
        GCallback(destroying), null(UInt8));

    gtk_container_set_border_width(Pointer[GtkContainer](window), 10u);

    var button = gtk_button_new_with_label(cstring("hello, gtk"));
    gSignalConnect(button, cstring("clicked"),
        GCallback(hello), null(UInt8));

    gtk_container_add(Pointer[GtkContainer](window), button);

    gtk_widget_show(button);
    gtk_widget_show(window);
    gtk_main();

}
